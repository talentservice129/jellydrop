(this.webpackJsonptetromino=this.webpackJsonptetromino||[]).push([[0],{81:function(e,t,n){},82:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var c,r=n(2),a=n.n(r),o=n(13),s=n.n(o),i=n(21),u=n(106),l=n(4),d="UA-141015392-3",f="Tetromino",j="https://github.com/reactgular/tetromino",b="tetromino",O="1.0.0",m="/tetromino",v=n(7),p=n(45),x=function(e){return e};!function(e){e.WELCOME="welcome",e.STARTING="starting",e.RUNNING="running",e.PAUSED="paused",e.FINISHING="finishing",e.FINISHED="finished"}(c||(c={}));var h,g={buffer:{rows:[],width:0,height:0},restart_ticker:0,fast_speed:25,level:1,lines_total:0,lines_level:0,lines_level_up:1,hold_enable:!0,next:[void 0,void 0,void 0],next_max:3,player_freeze:!1,repeat_speed:100,score:0,screen:[],soft_drop:!1,sound_id:1,sound_tracks:[],status:c.WELCOME},y="game";!function(e){var t=e.game=Object(p.a)(x,(function(e){return e.game})),n=Object(p.a)(t,(function(e){return e.buffer})),r=Object(p.a)(t,(function(e){return e.screen})),a=e.status=Object(p.a)(t,(function(e){return e.status})),o=(e.welcoming=Object(p.a)(a,(function(e){return e===c.WELCOME})),e.finishing=Object(p.a)(a,(function(e){return e===c.FINISHING})),e.finished=Object(p.a)(a,(function(e){return e===c.FINISHED})),e.paused=Object(p.a)(a,(function(e){return e===c.PAUSED})),e.starting=Object(p.a)(a,(function(e){return e===c.STARTING})),e.running=Object(p.a)(a,(function(e){return e===c.RUNNING})),e.level=Object(p.a)(t,(function(e){return e.level})),e.lines=Object(p.a)(t,(function(e){return e.lines_total+e.lines_level})),e.restartTicker=Object(p.a)(t,(function(e){return e.restart_ticker})),e.score=Object(p.a)(t,(function(e){return e.score})),e.next=Object(p.a)(t,(function(e){return e.next})),e.hold=Object(p.a)(t,(function(e){return e.hold?[e.hold]:[void 0]})),e.holdEnabled=Object(p.a)(t,(function(e){return e.hold_enable})),e.repeatSpeed=Object(p.a)(t,(function(e){return e.repeat_speed})),e.screenCell=function(e){return Object(p.a)(r,(function(t){return t[e]}))},e.speed=Object(p.a)(t,(function(e){if(e.soft_drop&&e.player)return e.fast_speed;var t=500-20*e.level;return Math.max(e.fast_speed,t)})),e.size=Object(p.a)(n,(function(e){return[e.width,e.height]})));e.aspectRatio=Object(p.a)(o,(function(e){var t=Object(v.a)(e,2),n=t[0],c=t[1];return"".concat(n/c," / 0.9")})),e.soundTracks=Object(p.a)(t,(function(e){return e.sound_tracks})),e.toastMessage=Object(p.a)(t,(function(e){return e.toast_message}))}(h||(h={}));var N,k=["left","right","rotate_left","rotate_right","soft_drop","hard_drop","hold"],w={left:"Move Left",right:"Move Right",rotate_left:"Rotate Left",rotate_right:"Rotate Right",soft_drop:"Soft Drop",hard_drop:"Hard Drop",hold:"Hold"};!function(e){e.OPTIONS="options",e.SWIPEOPTIONS="swipeoptions",e.HIGH_SCORES="high_scores",e.CREDITS="credits",e.SETTINGS="settings"}(N||(N={}));var S,_={dark:!1,ghost_piece:!0,swipe:"off",high_scores:[],music:!0,hand:"right",music_type:0,music_volume:80,sound:!0,sound_volume:80,start_level:1,keys:{right:"ArrowRight",left:"ArrowLeft",rotate_left:"ArrowUp",rotate_right:"KeyZ",soft_drop:"ArrowDown",hard_drop:"Space",hold:"KeyC"}},C=O,T="app";!function(e){var t=e.app=Object(p.a)(x,(function(e){return e.app})),n=e.dark=Object(p.a)(t,(function(e){return Boolean(e.dark)})),c=e.highScores=Object(p.a)(t,(function(e){return e.high_scores})),r=e.ghostPiece=Object(p.a)(t,(function(e){return e.ghost_piece})),a=e.Swipe=Object(p.a)(t,(function(e){return e.swipe})),o=e.hand=Object(p.a)(t,(function(e){return e.hand})),s=e.music=Object(p.a)(t,(function(e){return Boolean(e.music)})),i=e.musicType=Object(p.a)(t,(function(e){return e.music_type})),u=e.musicVolume=Object(p.a)(t,(function(e){return e.music_volume})),l=e.sound=Object(p.a)(t,(function(e){return Boolean(e.sound)})),d=e.soundVolume=Object(p.a)(t,(function(e){return e.sound_volume})),f=e.dialog=Object(p.a)(t,(function(e){return e.dialog})),j=(e.isOpen=function(e){return Object(p.a)(f,(function(t){return t===e}))},e.startLevel=Object(p.a)(t,(function(e){return e.start_level}))),b=e.keys=Object(p.a)(t,(function(e){return e.keys}));e.persist=Object(p.a)(n,r,a,o,j,l,d,s,u,i,c,b,(function(e,t,n,c,r,a,o,s,i,u,l,d){return{version:O,dark:e,ghost_piece:t,swipe:n,hand:c,start_level:r,sound:a,sound_volume:o,music:s,music_volume:i,music_type:u,high_scores:l,keys:d}}))}(S||(S={}));var E,R,I=n(17),M=n(6),L=n(12),P=function(e){var t=e.getState;return function(e){return function(n){return e(Object(L.a)(Object(L.a)({},n),{},{snapshot:t()}))}}},D=n(24),F={log:console.log,error:console.error,debug:console.debug},H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log",n=F[t]||console[t];return n.bind(console,"".concat(e,":"))},A=n(34),G=n(54);!function(e){var t=function(e){return"".concat(T,"/").concat(e)};e.dark=Object(M.b)(t("dark")),e.ghostPiece=Object(M.b)(t("ghost_piece")),e.hand=Object(M.b)(t("hand")),e.Swipe=Object(M.b)(t("swipe")),e.music=Object(M.b)(t("music")),e.musicType=Object(M.b)(t("music_type")),e.musicVolume=Object(M.b)(t("music_volume")),e.sound=Object(M.b)(t("sound")),e.soundVolume=Object(M.b)(t("sound_volume")),e.open=Object(M.b)(t("open")),e.close=Object(M.b)(t("close")),e.startLevel=Object(M.b)(t("start_level")),e.recordScore=Object(M.b)(t("record_score")),e.resetScore=Object(M.b)(t("reset_store")),e.resetOptions=Object(M.b)(t("reset_options")),e.keys=Object(M.b)(t("keys")),e.persist=Object(M.b)(t("persist"))}(E||(E={})),function(e){var t=function(e,t){i.a.event({category:T,action:e,value:t})};e.slice=Object(M.c)({name:T,initialState:_,reducers:{},extraReducers:function(e){e.addCase(E.dark,(function(e,n){var c=n.payload;e.dark=void 0===c?!e.dark:Boolean(c),t("dark",e.dark?1:0)})).addCase(E.ghostPiece,(function(e,t){var n=t.payload;e.ghost_piece=void 0===n?!e.ghost_piece:Boolean(n)})).addCase(E.Swipe,(function(e,t){var n=t.payload;e.swipe=void 0===n?"off":n})).addCase(E.hand,(function(e,t){var n=t.payload;e.hand=void 0===n?"right":n})).addCase(E.music,(function(e,n){var c=n.payload;e.music=void 0===c?!e.music:Boolean(c),t("music",e.music?1:0)})).addCase(E.musicVolume,(function(e,t){var n=t.payload;e.music_volume=n})).addCase(E.musicType,(function(e,n){var c=n.payload;e.music_type=c,t("music_type",e.music_type)})).addCase(E.sound,(function(e,n){var c=n.payload;e.sound=void 0===c?!e.sound:Boolean(c),t("sound",e.sound?1:0)})).addCase(E.soundVolume,(function(e,t){var n=t.payload;e.sound_volume=n})).addCase(E.keys,(function(e,t){var n,c=t.payload,r=Object(G.a)(k);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(e.keys[a]===c.code){e.keys[a]="";break}}}catch(o){r.e(o)}finally{r.f()}e.keys[c.keyOf]=c.code})).addCase(E.open,(function(e,t){var n=t.payload;e.dialog=n})).addCase(E.close,(function(e){e.dialog=void 0})).addCase(E.startLevel,(function(e,n){var c=n.payload;void 0===c?1===e.start_level?e.start_level=5:e.start_level=e.start_level<25?e.start_level+5:1:e.start_level=Math.max(1,Math.min(c,25)),t("start_level",e.start_level)})).addCase(E.recordScore,(function(e,n){var c=n.payload,r=Array.from(new Set([].concat(Object(I.a)(e.high_scores),[c])));r.sort((function(e,t){return e-t})),e.high_scores=r.reverse().slice(0,9),t("high_scores",c)})).addCase(E.resetScore,(function(e){e.high_scores=[]})).addCase(E.resetOptions,(function(e){t("reset_options");var n=e.dark,c=e.dialog,r=e.high_scores;return Object(L.a)(Object(L.a)({},_),{},{dark:n,dialog:c,high_scores:r})})).addCase(E.persist,(function(e,t){var n=t.payload,c=n.version,r=Object(A.a)(n,["version"]);if(c===O)return Object(L.a)(Object(L.a)({},e),r)}))}})}(R||(R={}));var U,B=n(9),z=n(1),V=["".concat(m,"/audio/music/the-ice-cream-man.mp3"),"".concat(m,"/audio/music/8-bit-perplexion.mp3"),"".concat(m,"/audio/music/its-raining-pixels.mp3"),"".concat(m,"/audio/music/arcade-puzzler.mp3")],W="".concat(m,"/audio/sounds/power-down-13.mp3"),Z="".concat(m,"/audio/sounds/retro-chip-power.mp3"),q="".concat(m,"/audio/sounds/ui-quirky-19.mp3"),J="".concat(m,"/audio/sounds/zapsplat_bambo_swoosh.mp3"),K="".concat(m,"/audio/sounds/zapsplat_level_up.mp3"),Y=[W,Z,q,J,K],X=Array(11).fill(null).map((function(e,t){return 10*t})).map((function(e){return{label:"".concat(e,"%"),value:e}})),Q=V.map((function(e,t){return{label:"Type ".concat(t+1),value:t}})),$={true:Object(z.jsx)(B.n,{}),false:Object(z.jsx)(B.m,{})},ee={true:"Turn sound off",false:"Turn sound on"},te={true:Object(z.jsx)(B.j,{}),false:Object(z.jsx)(B.m,{})},ne={true:"Turn music off",false:"Turn music on"};!function(e){e.I="i",e.O="o",e.T="t",e.S="s",e.Z="z",e.J="j",e.L="l"}(U||(U={}));var ce=Object.values(U),re=function(e){return Math.floor(Math.random()*e)},ae=function(){return ce[re(ce.length)]},oe=n(23),se=n.n(oe),ie=se.a.mark(ue);function ue(e){var t;return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:if(!(t<e)){n.next=7;break}return n.next=4,{};case 4:t++,n.next=1;break;case 7:case"end":return n.stop()}}),ie)}var le=se.a.mark(de);function de(e,t){var n;return se.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:n=0;case 1:if(!(n<t)){c.next=7;break}return c.next=4,{cells:Array.from(ue(e))};case 4:n++,c.next=1;break;case 7:case"end":return c.stop()}}),le)}function fe(e,t,n){var c=e.width,r=e.height;return t<0||t>=c||n<0||n>=r}function je(e,t,n){return void 0!==e.rows[n].cells[t].type}function be(e,t){for(var n=e.x,c=e.y,r=e.piece,a=0;a<r.length;a++){var o=Object(v.a)(r[a],2),s=n+o[0],i=c+o[1];if(fe(t,s,i)||je(t,s,i))return!0}return!1}var Oe,me,ve,pe,xe=n(10),he=(Oe={},Object(xe.a)(Oe,U.O,[[[-1,0],[0,0],[-1,1],[0,1]]]),Object(xe.a)(Oe,U.I,[[[-2,0],[-1,0],[0,0],[1,0]],[[0,-1],[0,0],[0,1],[0,2]]]),Object(xe.a)(Oe,U.S,[[[0,-1],[0,0],[1,0],[1,1]],[[0,0],[1,0],[-1,1],[0,1]]]),Object(xe.a)(Oe,U.Z,[[[1,-1],[0,0],[1,0],[0,1]],[[-1,0],[0,0],[0,1],[1,1]]]),Object(xe.a)(Oe,U.L,[[[1,-1],[-1,0],[0,0],[1,0]],[[-1,-1],[0,-1],[0,0],[0,1]],[[-1,0],[0,0],[1,0],[-1,1]],[[0,-1],[0,0],[0,1],[1,1]]]),Object(xe.a)(Oe,U.J,[[[-1,-1],[-1,0],[0,0],[1,0]],[[0,-1],[0,0],[-1,1],[0,1]],[[-1,0],[0,0],[1,0],[1,1]],[[0,-1],[1,-1],[0,0],[0,1]]]),Object(xe.a)(Oe,U.T,[[[0,-1],[-1,0],[0,0],[1,0]],[[0,-1],[-1,0],[0,0],[0,1]],[[-1,0],[0,0],[1,0],[0,1]],[[0,-1],[0,0],[1,0],[0,1]]]),Oe);function ge(e,t){for(var n=e.x,c=e.y,r=e.type,a=e.rotate,o=he[r][a],s=new Set,i=0;i<o.length;i++){var u=Object(v.a)(o[i],2),l=u[0],d=u[1],f=t.rows[c+d];f.cells[n+l]={type:r},s.add(f)}var j=0;return s.forEach((function(e){e.cells.every((function(e){return Boolean(e.type)}))&&(e.removed=!0,j++)})),j}function ye(e,t,n,c){var r=Ce(t,n,c);be(r,e)||(t.rotate=r.rotate,t.x=r.x,t.y=r.y)}!function(e){e.LEFT="left",e.RIGHT="right"}(pe||(pe={}));var Ne=function(e){var t=Object(v.a)(e,2);return[t[0],t[1]+1]},ke=function(e){return e},we=function(e,t){return t},Se=(me={},Object(xe.a)(me,pe.LEFT,(function(e){var t=Object(v.a)(e,2);return[t[0]-1,t[1]]})),Object(xe.a)(me,pe.RIGHT,(function(e){var t=Object(v.a)(e,2);return[t[0]+1,t[1]]})),me),_e=(ve={},Object(xe.a)(ve,pe.LEFT,(function(e,t){return t===e.length-1?0:t+1})),Object(xe.a)(ve,pe.RIGHT,(function(e,t){return 0===t?e.length-1:t-1})),ve);function Ce(e,t,n){var c=e.x,r=e.y,a=e.type,o=e.rotate,s=he[a],i=n(s,o),u=t([c,r]),l=Object(v.a)(u,2);return{x:l[0],y:l[1],piece:s[i],rotate:i}}var Te=function(e,t){for(var n,c=t.x,r=t.y,a=t.type,o=t.rotate;;){var s,i,u=Ce({x:(null===(s=n)||void 0===s?void 0:s.x)||c,y:(null===(i=n)||void 0===i?void 0:i.y)||r,type:a,rotate:o},Ne,we);if(be(u,e))return n;n={x:u.x,y:u.y}}},Ee=function(e){var t,n,c,r=(t=10,n=20,{rows:Array.from(de(t,n)),width:t,height:n});return Object(L.a)(Object(L.a)({},g),{},{next:(c=e,Array(c).fill(null).map(ae)),buffer:r,screen:Array(r.width*r.height).fill({}),level:1,score:0,player:void 0,ghost:void 0})},Re={1:function(e){return 40},2:function(e){return 100},3:function(e){return 300},4:function(e){return 1200}},Ie={1:function(e){return 80},2:function(e){return 200},3:function(e){return 600},4:function(e){return 2400}},Me={1:function(e){return 120},2:function(e){return 300},3:function(e){return 900},4:function(e){return 3600}},Le={1:function(e){return 40*(e+1)},2:function(e){return 100*(e+1)},3:function(e){return 300*(e+1)},4:function(e){return 1200*(e+1)}},Pe=function(e,t,n){return function(e,t){if(0!==t){if(1===e)return Re[t](e);if(2===e)return Ie[t](e);if(e>=3&&e<10)return Me[t](e);if(e>=10)return Le[t](e)}return 0}(e,n)+he[t][0].length},De=se.a.mark(Fe);function Fe(e){var t,n,c,r,a,o,s,i;return se.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:t=e.rows,n=e.width,c=e.height,r=0;case 2:if(!(r<c)){u.next=14;break}a=t[r],o=a.cells,s=a.removed,i=0;case 5:if(!(i<n)){u.next=11;break}return u.next=8,{type:o[i].type,glow:s};case 8:i++,u.next=5;break;case 11:r++,u.next=2;break;case 14:case"end":return u.stop()}}),De)}function He(e,t,n,c){var r=e.width,a=Array.from(Fe(e));if(t){var o=Ae(a,r,(function(e){e.type=t.type,e.ghost=.2})),s=Ae(a,r,(function(e){e.type=t.type,e.ghost=void 0})),i=t.y-c,u=Ae(a,r,(function(e,n,r){e.type||(e.type=t.type,e.ghost=(.2-.05)*function(e){return(e-c)/i}(r)+.05)}));he[t.type][t.rotate].forEach((function(e){var r=Object(v.a)(e,2),a=r[0],i=r[1];if(n&&o(n.x+a,n.y+i),s(t.x+a,t.y+i),void 0!==c)for(var l=c;l<t.y;l++)u(t.x+a,l+i)}))}return a}function Ae(e,t,n){return function(c,r){n(e[r*t+c],c,r)}}var Ge,Ue,Be=function(e,t){e.sound_tracks.push({id:e.sound_id++,src:t})};function ze(e){var t=e.rows.findIndex((function(e){return e.removed}));return-1!==t&&(function(e,t){var n=e.rows,c=e.width;n.splice(t,1),n.unshift({cells:Array.from(ue(c))})}(e,t),!0)}!function(e){var t=function(e){return"".concat(y,"/").concat(e)};e.softDrop=Object(M.b)(t("soft_drop")),e.hardDrop=Object(M.b)(t("hard_drop")),e.start=Object(M.b)(t("start")),e.run=Object(M.b)(t("run")),e.pause=Object(M.b)(t("pause")),e.resume=Object(M.b)(t("resume")),e.quit=Object(M.b)(t("quit")),e.tick=Object(M.b)(t("tick")),e.finishing=Object(M.b)(t("finishing")),e.render=Object(M.b)(t("render")),e.bufferSet=Object(M.b)(t("bufferSet")),e.bufferPatch=Object(M.b)(t("bufferPatch")),e.patch=Object(M.b)(t("patch")),e.rotate=Object(M.b)(t("rotate")),e.move=Object(M.b)(t("move")),e.hold=Object(M.b)(t("hold")),e.soundTrack=Object(M.b)(t("soundTrack")),e.toast=Object(M.b)(t("toast"))}(Ge||(Ge={})),function(e){var t=function(e,t){i.a.event({category:y,action:e,value:t})};e.slice=Object(M.c)({name:y,initialState:g,reducers:{},extraReducers:function(e){e.addCase(Ge.softDrop,(function(e,t){var n=t.payload;e.soft_drop=n})).addCase(Ge.start,(function(e,n){var r=n.payload;t("start");var a=Ee(e.next_max);return Object(L.a)(Object(L.a)({},a),{},{level:r,status:c.STARTING})})).addCase(Ge.run,(function(e,t){e.status=c.RUNNING})).addCase(Ge.pause,(function(e,n){t("pause"),e.status=c.PAUSED})).addCase(Ge.resume,(function(e,n){t("resume"),e.status=c.STARTING})).addCase(Ge.quit,(function(e){return t("quit"),Ee(e.next_max)})).addCase(Ge.render,(function(e,t){e.screen=He(e.buffer,e.player,e.ghost)})).addCase(Ge.tick,(function(e,t){var n=t.snapshot;if(e.player){var r=function(e,t){var n=Ce(t,Ne,we);return be(n,e)?{collision:!0,lines:ge(t,e)}:(t.y=n.y,{collision:!1})}(e.buffer,e.player),a=r.collision,o=r.lines;if(a){var s=e.level,i=function(e,t,n){e.score+=Pe(e.level,t,n);var c=e.level+1;return e.lines_level+=n,e.lines_level>=c?(e.lines_total+=c,e.lines_level=0,e.level++,Z):e.player_freeze?void 0:q}(e,e.player.type,o);s!==e.level&&e.level%5===0&&(e.toast_message="Level ".concat(e.level),(null===n||void 0===n?void 0:n.app.sound)&&Be(e,K)),(null===n||void 0===n?void 0:n.app.sound)&&i&&Be(e,i),e.player_freeze=!1,e.hold_enable=!0,e.player=void 0,e.ghost=void 0}else e.ghost=(null===n||void 0===n?void 0:n.app.ghost_piece)?Te(e.buffer,e.player):void 0}else if(!ze(e.buffer)){var u=e.next.shift();e.next.length<e.next_max&&e.next.push(ae());var l=function(e,t){var n=he[e][0].some((function(e){var t=Object(v.a)(e,2);return t[0],t[1]<0}))?1:0;return{x:Math.floor(t/2),y:n,type:e,rotate:0}}(u,e.buffer.width);be(Ce(l,ke,we),e.buffer)?((null===n||void 0===n?void 0:n.app.sound)&&Be(e,W),e.restart_ticker++,e.status=c.FINISHING):(e.player=l,e.ghost=(null===n||void 0===n?void 0:n.app.ghost_piece)?Te(e.buffer,l):void 0)}e.screen=He(e.buffer,e.player,e.ghost)})).addCase(Ge.finishing,(function(e,t){t.snapshot;var n=e.buffer.rows.find((function(e){return e.removed}));if(n)e.score+=n.cells.filter((function(e){return Boolean(e.type)})).length,ze(e.buffer);else{var r=e.buffer.rows.find((function(e){return e.cells.some((function(e){return Boolean(e.type)}))}));r?r.removed=!0:e.status=c.FINISHED}e.screen=He(e.buffer,e.player,e.ghost)})).addCase(Ge.hardDrop,(function(e,t){var n=t.snapshot;if(e.player&&!e.player_freeze){var c=e.player.y;!function(e,t){for(;;){var n=Ce(t,Ne,we);if(be(n,e))break;t.y=n.y}}(e.buffer,e.player),e.restart_ticker++,e.screen=He(e.buffer,e.player,void 0,c),e.player_freeze=!0,e.ghost=void 0,(null===n||void 0===n?void 0:n.app.sound)&&(Be(e,J),Be(e,q))}})).addCase(Ge.bufferSet,(function(e,t){var n=t.payload;e.buffer=n})).addCase(Ge.bufferPatch,(function(e,t){t.payload.forEach((function(t){return function(e,t){var n=t.x,c=t.y,r=Object(A.a)(t,["x","y"]);e.rows[c].cells[n]=r}(e.buffer,t)}))})).addCase(Ge.rotate,(function(e,t){var n=t.payload,c=t.snapshot;e.player&&!e.player_freeze&&(ye(e.buffer,e.player,ke,_e[n]),e.ghost=(null===c||void 0===c?void 0:c.app.ghost_piece)?Te(e.buffer,e.player):void 0,e.screen=He(e.buffer,e.player,e.ghost))})).addCase(Ge.move,(function(e,t){var n=t.payload,c=t.snapshot;e.player&&!e.player_freeze&&(ye(e.buffer,e.player,Se[n],we),e.ghost=(null===c||void 0===c?void 0:c.app.ghost_piece)?Te(e.buffer,e.player):void 0,e.screen=He(e.buffer,e.player,e.ghost))})).addCase(Ge.hold,(function(e){e.player&&(e.hold&&(e.next=[e.hold].concat(Object(I.a)(e.next))),e.hold=e.player.type,e.hold_enable=!1,e.player=void 0,e.ghost=void 0,e.restart_ticker++,e.screen=He(e.buffer,e.player,e.ghost))})).addCase(Ge.soundTrack,(function(e,t){var n=t.payload;e.sound_tracks=e.sound_tracks.filter((function(e){return e.id!==n}))})).addCase(Ge.patch,(function(e,t){var n=t.payload,c=t.snapshot,r=(null===c||void 0===c?void 0:c.app.ghost_piece)&&e.player?Te(e.buffer,e.player):void 0,a=He(e.buffer,e.player,r);return Object(L.a)(Object(L.a)(Object(L.a)({},e),n),{},{ghost:r,screen:a})}))}})}(Ue||(Ue={}));var Ve=function(){return Object(D.b)({app:R.slice.reducer,game:Ue.slice.reducer})};var We,Ze=function(){return Object(l.b)()},qe=function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ve();return Object(M.a)({devTools:{name:f,maxAge:100},preloadedState:e,reducer:t,middleware:function(e){return[].concat(Object(I.a)(e()),[P])}})}(e)},Je=n(109),Ke=n(5),Ye=n.n(Ke),Xe=(n(81),function(e){var t=e.onClose,n=void 0===t?function(){return null}:t,c=e.open,a=e.title,o=e.large,s=e.children,l=e.className,d=Object(u.a)("(max-width:375px)"),f=Object(r.useMemo)((function(){return o&&d}),[o,d]);return function(e,t){Object(r.useEffect)((function(){var n;e&&i.a.modalview((n=t)&&n.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((function(e){return e.toLowerCase()})).join("-"))}),[e,t])}(c,a),Object(z.jsxs)(Je.a,{className:Ye()("ui-dialog",{fullScreen:f}),PaperProps:{className:Ye()("ui-dialog-paper",l,{"border-primary":!f,fullScreen:f})},open:c,onClose:n,fullScreen:f,children:[Object(z.jsxs)("div",{className:"ui-dialog-title text-primary",children:[a,o&&Object(z.jsx)("button",{className:"ml:hidden flex absolute top-0 -left-3 p-3 dark:text-white text-black text-sm",onClick:n,children:Object(z.jsx)(B.a,{})})]}),Object(z.jsx)("div",{className:"flex flex-col",children:s})]})}),Qe=function(e){var t=e.closeAction,n=void 0===t?E.close():t,c=e.selectOpen,r=e.title,a=e.large,o=e.children,s=e.className,i=Ze(),u=Object(l.c)(c);return Object(z.jsx)(Xe,{className:s,open:Boolean(u),title:r,large:a,onClose:function(){return i(n)},children:o})},$e=function(e){var t=e.credits,n=e.className;return Object(z.jsx)("div",{className:Ye()(n,"flex flex-col text-xs -mb-3"),children:t.map((function(e,t){var n=e.title,c=e.desc,r=e.url;return Object(z.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(z.jsxs)("div",{children:[n,":"]}),Object(z.jsx)("a",{href:r,className:"text-primary hover:underline",children:c})]},t)}))})},et=[{title:"UX Design by",desc:"Zayn Assalam",url:"https://dribbble.com/shots/14684127-Tetris-Mobile-App"},{title:"Programmed by",desc:"Nick Foscarini",url:"https://www.linkedin.com/in/nick-foscarini/"},{title:"Built with",desc:"ReactJS",url:"https://reactjs.org/"},{title:"States managed by",desc:"Redux Toolkit",url:"https://redux-toolkit.js.org/"},{title:"Styled with",desc:"tailwindcss",url:"https://tailwindcss.com/"},{title:"Source code",desc:"GitHub",url:j}],tt=function(e){var t=e.selectOpen,n=void 0===t?S.isOpen(N.CREDITS):t;return Object(z.jsx)(Qe,{className:"max-w-[12rem]",title:"Credits",selectOpen:n,children:Object(z.jsx)($e,{credits:et})})},nt=n(61),ct=n(60),rt=n(111),at=Object(r.createContext)({transparent:!1,large:!1}),ot=function(){return Object(r.useContext)(at)},st=function(e){var t=e.transparent,n=e.large,c=e.children,a=Object(r.useMemo)((function(){return{transparent:t,large:n}}),[t,n]);return Object(z.jsx)(at.Provider,{value:a,children:c})};n(82);!function(e){e[e.NORMAL=0]="NORMAL",e[e.ROUND=1]="ROUND",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT",e[e.UP=4]="UP",e[e.DOWN=5]="DOWN"}(We||(We={}));var it=function(e){var t=e.active,n=e.disabled,c=e.preventFocus,a=e.primary,o=e.secondary,s=e.toolTip,i=e.shape,u=void 0===i?We.NORMAL:i,l=e.className,d=e.children,f=(e.onMouseDown,e.onMouseUp,e.onPress),j=e.onRelease,b=Object(A.a)(e,["active","disabled","preventFocus","primary","secondary","toolTip","shape","className","children","onMouseDown","onMouseUp","onPress","onRelease"]),O=Object(r.useRef)(!1),m=Object(r.useRef)(!1),v=ot().transparent,p=Object(r.useMemo)((function(){return Ye()(l,"ui-button",{"ui-button-standard":v,"ui-button-trans":v,"ui-shape-round":u===We.ROUND,"ui-shape-normal":u===We.NORMAL,"ui-shape-left":u===We.LEFT,"ui-shape-right":u===We.RIGHT,"ui-shape-up":u===We.UP,"ui-shape-down":u===We.DOWN,"text-primary":a,"text-secondary":o,active:t})}),[t,a,o,u,v,l]);return Object(z.jsx)(rt.a,{title:s||"",children:Object(z.jsx)("button",Object(L.a)(Object(L.a)({className:p,disabled:n,onTouchStart:function(){O.current=!0,n||(m.current=!0,f&&f())},onTouchEnd:function(){m.current=!1,j&&j()},onMouseDown:function(e){c&&e.preventDefault(),O.current||n||(m.current=!0,f&&f())},onMouseUp:function(e){O.current||(m.current=!1,j&&j())},onMouseLeave:function(e){!O.current&&m.current&&(m.current=!1,j&&j())}},b),{},{children:d}))})},ut=function(e){var t=e.tools,n=e.className,c=Ze();return Object(z.jsx)("div",{className:Ye()(n,"flex justify-between w-full"),children:t.map((function(e,t){var n=e.icon,r=e.toolTip,a=e.active,o=e.action;return Object(z.jsx)(it,{className:"rounded-full text-[12px] p-2",primary:!0,active:a,onClick:function(){return c(o)},toolTip:r,children:n},t)}))})},lt=function(e){var t,n=e.value,c=e.digits,a=e.primary,o=void 0===a||a,s=e.className,i=function(e){return Object(r.useMemo)((function(){return"0".repeat(e)}),[e])}(c),u=function(e,t){return Object(r.useMemo)((function(){var n=e.toString();return n.length>t?"9".repeat(t):n}),[e,t])}(n,c),l=(t=c-u.length,Object(r.useMemo)((function(){return{__html:"&nbsp;".repeat(t)}}),[t])),d=Object(r.useMemo)((function(){return{"text-primary":o,"text-secondary":!o}}),[o]);return Object(z.jsx)("div",{className:Ye()(s,"flex relative leading-none font-digits p-2"),children:Object(z.jsxs)("div",{className:"relative mx-auto",children:[Object(z.jsx)("div",{className:Ye()("opacity-20",d),children:i}),Object(z.jsxs)("div",{className:Ye()("absolute top-0 left-0",d),children:[Object(z.jsx)("span",{dangerouslySetInnerHTML:l}),Object(z.jsx)("span",{children:u})]})]})})},dt=function(e){var t=e.rank,n=e.score,c=e.className;return Object(z.jsxs)("div",{className:Ye()(c,"flex font-mono items-baseline space-x-4"),children:[Object(z.jsxs)("div",{className:"text-light",children:["#",t]}),Object(z.jsx)(lt,{digits:6,value:n})]})},ft=function(e){var t=e.actionHome,n=void 0===t?Ge.quit():t,c=e.actionRestart,a=void 0===c?Ge.start(1):c,o=e.actionHighScores,s=void 0===o?E.open(N.HIGH_SCORES):o,i=e.className,u=Object(l.c)(h.score),d=Object(l.c)(S.highScores),f=Ze();Object(r.useEffect)((function(){f(E.recordScore(u))}),[f,u]);var j=Object(r.useMemo)((function(){return[{icon:Object(z.jsx)(B.h,{}),toolTip:"Home",action:n},{icon:Object(z.jsx)(ct.a,{}),toolTip:"Restart",action:a},{icon:Object(z.jsx)(nt.a,{}),toolTip:"High Scores",action:s}]}),[n,a,s]),b=Object(r.useMemo)((function(){return d.indexOf(u)+1}),[d,u]);return Object(z.jsxs)("div",{className:Ye()(i,"flex flex-col text-2xl"),children:[Object(z.jsxs)("div",{className:"flex flex-col ml-auto mr-auto",children:[Object(z.jsx)("div",{className:"font-mono text-center",children:"Your Score"}),Object(z.jsx)(dt,{rank:b,score:u}),Object(z.jsx)("div",{className:"font-mono text-center mt-5",children:"Your Best"}),Object(z.jsx)(dt,{rank:1,score:d[0]||0})]}),Object(z.jsx)(ut,{className:"mt-5",tools:j})]})},jt=function(e){var t=e.selectStart,n=void 0===t?S.startLevel:t,c=e.selectOpen,r=void 0===c?h.finished:c,a=Object(l.c)(n);return Object(z.jsx)(Qe,{className:"max-w-[12rem]",title:"Game Over",selectOpen:r,children:Object(z.jsx)(ft,{actionRestart:Ge.start(a)})})},bt=function(e){var t=e.selectScores,n=void 0===t?S.highScores:t,c=e.className,a=Object(l.c)(n),o=Object(r.useMemo)((function(){return[].concat(Object(I.a)(a||[]),Object(I.a)(Array(10).fill(0))).slice(0,9)}),[a]);return Object(z.jsx)("div",{className:Ye()(c,"flex flex-col text-2xl"),children:o.map((function(e,t){return Object(z.jsx)(dt,{rank:t+1,score:e},t)}))})},Ot=function(e){var t=e.selectOpen,n=void 0===t?S.isOpen(N.HIGH_SCORES):t;return Object(z.jsx)(Qe,{className:"max-w-[12rem]",title:"High Scores",selectOpen:n,children:Object(z.jsx)(bt,{className:"ml-auto mr-auto"})})};function mt(e){var t,n=e.onChange,c=e.options,a=e.value,o=Object(r.useMemo)((function(){return c.findIndex((function(e){return e.value===a}))}),[a,c]),s=Object(r.useCallback)((function(){var e=Math.min(c.length-1,o+1);n(c[e].value)}),[n,c,o]),i=Object(r.useCallback)((function(){var e=Math.max(0,o-1);n(c[e].value)}),[n,c,o]);return Object(z.jsxs)("div",{className:"flex",children:[Object(z.jsx)(it,{className:"px-4",onClick:i,disabled:o<=0,children:"-"}),Object(z.jsx)("div",{className:"flex-grow text-center",children:null===(t=c[o])||void 0===t?void 0:t.label}),Object(z.jsx)(it,{className:"px-4",onClick:s,disabled:o>=c.length-1,children:"+"})]})}var vt,pt,xt=function(){var e=Object(l.c)(S.music),t=Object(l.c)(S.musicType),n=Object(l.c)(S.musicVolume),c=Object(l.c)(S.sound),r=Object(l.c)(S.soundVolume),a=Ze();return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{children:"Sound Fx"}),Object(z.jsx)(it,{className:"flex rounded-full text-[12px] p-2 justify-center",active:c,onClick:function(){return a(E.sound())},children:$[c.toString()]}),Object(z.jsx)("div",{children:"Sound Fx Volume"}),Object(z.jsx)(mt,{options:X,value:r,onChange:function(e){return a(E.soundVolume(e))}}),Object(z.jsx)("div",{children:"Music"}),Object(z.jsx)(it,{className:"flex rounded-full text-[12px] p-2 justify-center",active:e,onClick:function(){return a(E.music())},children:te[e.toString()]}),Object(z.jsx)("div",{children:"Music Volume"}),Object(z.jsx)(mt,{options:X,value:n,onChange:function(e){return a(E.musicVolume(e))}}),Object(z.jsx)("div",{children:"Music Type"}),Object(z.jsx)(mt,{options:Q,value:t,onChange:function(e){return a(E.musicType(e))}})]})},ht=function(){var e=Object(l.c)(S.ghostPiece),t=Object(l.c)(S.hand),n=Object(l.c)(S.Swipe),c=Ze(),a=Object(r.useCallback)((function(){c(E.hand("left"===t?"right":"left"))}),[t,c]),o=Object(r.useCallback)((function(){c(E.Swipe("on"===n?"off":"on"))}),[n,c]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{children:"Ghost Piece"}),Object(z.jsx)(it,{className:"flex rounded-full text-[12px] p-2 justify-center",active:e,onClick:function(){return c(E.ghostPiece())},children:e?Object(z.jsx)(B.c,{}):Object(z.jsx)(B.l,{})}),Object(z.jsx)("div",{children:"Left Hand"}),Object(z.jsx)(it,{className:"flex rounded-full text-[12px] p-2 justify-center",active:"left"===t,onClick:a,children:"left"===t?Object(z.jsx)(B.c,{}):Object(z.jsx)(B.l,{})}),Object(z.jsx)("div",{children:"Right Hand"}),Object(z.jsx)(it,{className:"flex rounded-full text-[12px] p-2 justify-center",active:"right"===t,onClick:a,children:"right"===t?Object(z.jsx)(B.c,{}):Object(z.jsx)(B.l,{})}),Object(z.jsx)("div",{children:"Swipe"}),Object(z.jsx)(it,{className:"flex rounded-full text-[12px] p-2 justify-center",active:"on"===n,onClick:o,children:"on"===n?Object(z.jsx)(B.c,{}):Object(z.jsx)(B.l,{})}),Object(z.jsx)("div",{children:"D-Pad"}),Object(z.jsx)(it,{className:"flex rounded-full text-[12px] p-2 justify-center",active:"off"===n,onClick:o,children:"off"===n?Object(z.jsx)(B.c,{}):Object(z.jsx)(B.l,{})})]})},gt=["Digit","Key","Arrow"],yt=function(e){var t=e.label,n=e.keyCode,c=e.onClick,a=Object(r.useMemo)((function(){return function(e){return e&&e.replace(/[-_]/g," ").replace(/([A-Z])/g," $1")}(gt.reduce((function(e,t){return e.replace(t,"").trim()}),n))}),[n]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{children:t}),Object(z.jsx)(it,{className:"w-full",onClick:c,children:a})]})},Nt=function(e){var t=e.keyOf,n=e.onChange;return Object(r.useEffect)((function(){var e=function(e){var t=e.code;return n(t)};return document.addEventListener("keydown",e,{once:!0}),function(){return document.removeEventListener("keydown",e)}})),Object(z.jsx)("div",{className:"text-2xl font-bold text-center w-full uppercase",children:w[t]})},kt=function e(t){var n=t.selectKeys,c=void 0===n?S.keys:n,a=t.actionKeys,o=void 0===a?E.keys:a,s=Object(r.useState)(),i=Object(v.a)(s,2),u=i[0],d=i[1],f=Object(l.c)(c),j=Ze(),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";return Object(r.useMemo)((function(){return H(e,t)}),[e,t])}(e.name);return Object(z.jsxs)(z.Fragment,{children:[k.map((function(e,t){return Object(z.jsx)(yt,{keyCode:f[e],label:w[e],onClick:function(){return d(e)}},t)})),Object(z.jsxs)(Xe,{className:"max-w-[22rem]",title:"Press Key",open:Boolean(u),onClose:function(){return d(void 0)},children:[Object(z.jsx)(Nt,{keyOf:u,onChange:function(e){b({pickKey:u,code:e}),j(o({keyOf:u,code:e})),d(void 0)}}),Object(z.jsx)(it,{className:"mt-5 ml-auto mr-auto px-6 py-2",primary:!0,onClick:function(){return d(void 0)},children:"Cancel"})]})]})},wt=function(e){e.darkMode;var t=e.className,n=Ze();return Object(z.jsx)("div",{className:Ye()(t,"flex flex-col"),children:Object(z.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[Object(z.jsx)(kt,{}),Object(z.jsx)(ht,{}),Object(z.jsx)(xt,{}),Object(z.jsx)(it,{className:"mt-3 py-2",onClick:function(){return n(E.resetScore())},children:"Reset Scores"}),Object(z.jsx)(it,{className:"mt-3 py-2",onClick:function(){return n(E.resetOptions())},children:"Reset Options"})]})})},St=function(e){var t=e.value,n=e.onChange,c=e.iconOn,a=e.iconOff,o=e.className,s=Object(r.useMemo)((function(){var e=c||Object(z.jsx)(B.c,{className:"text-green-200"});return Object(r.cloneElement)(e,{className:"text-[24px] mr-1 ".concat(e.props.className)})}),[c]),i=Object(r.useMemo)((function(){var e=a||Object(z.jsx)(B.l,{className:"text-red-500"});return Object(r.cloneElement)(e,{className:"text-[24px] ".concat(e.props.className)})}),[a]);return Object(z.jsxs)("div",{className:Ye()(o,"flex relative p-1 text-[26px] h-[26px] w-[50px] bg-black rounded-full cursor-pointer items-center justify-between"),onClick:function(){return n(!t)},children:[s,i,Object(z.jsx)("div",{className:Ye()("bg-white rounded-full absolute top-[2px] left-[2px] h-[22px] w-[22px] transition-transform transform translate-x-0",{"translate-x-[24px]":Boolean(t)})})]})},_t=function(e){var t=e.selectDark,n=void 0===t?S.dark:t,c=e.className,r=Object(l.c)(n),a=Ze();return Object(z.jsx)(St,{className:c,onChange:function(e){return a(E.dark(e))},value:r,iconOn:Object(z.jsx)(B.i,{className:"text-blue-200"}),iconOff:Object(z.jsx)(B.k,{className:"text-yellow-500"})})},Ct=function(e){var t=e.selectWelcoming,n=void 0===t?h.welcoming:t,c=e.selectOpen,r=void 0===c?S.isOpen(N.OPTIONS):c,a=Object(l.c)(n);return Object(z.jsxs)(Qe,{className:"max-w-[22rem]",title:"Settings",large:!0,selectOpen:r,children:[Object(z.jsx)(wt,{darkMode:!a}),Object(z.jsx)(_t,{className:"ml-auto mr-auto mt-5 mb-auto"})]})},Tt=n(62),Et=function(e){var t=e.items,n=e.className,c=Ze();return Object(z.jsx)("div",{className:Ye()(n,"flex flex-col"),children:t.map((function(e,t){var n=e.action,r=e.active,a=e.title;return Object(z.jsx)(it,{className:"py-2 px-4 mb-4",primary:r,onClick:function(){return c(n)},children:a},t)}))})},Rt=function(e){Object(Tt.a)(e);var t=Object(r.useMemo)((function(){return[{title:"D-Pad Controls",action:E.open(N.OPTIONS)},{title:"Swipe Controls",action:E.open(N.SWIPEOPTIONS)}]}),[]);return Object(z.jsx)("div",{className:"flex flex-col h-full",children:Object(z.jsx)(Et,{className:"w-44 ml-auto mr-auto",items:t})})},It=function(e){var t=e.selectWelcoming,n=void 0===t?h.welcoming:t,c=e.selectOpen,r=void 0===c?S.isOpen(N.SETTINGS):c;Object(l.c)(n);return Object(z.jsx)(Qe,{className:"max-w-[22rem]",title:"Settings",large:!0,selectOpen:r,children:Object(z.jsx)(Rt,{})})},Mt=function(e){var t=e.selectMusic,n=void 0===t?S.music:t,c=e.selectSound,a=void 0===c?S.sound:c,o=e.selectStart,s=void 0===o?S.startLevel:o,i=e.closeAction,u=void 0===i?Ge.resume():i,d=e.selectOpen,f=void 0===d?h.paused:d,j=Object(l.c)(n),b=Object(l.c)(a),O=Object(l.c)(s),m=Object(r.useMemo)((function(){return[{icon:$[b.toString()],toolTip:ee[b.toString()],active:b,action:E.sound()},{icon:te[j.toString()],toolTip:ne[j.toString()],active:j,action:E.music()}]}),[j,b]),v=Object(r.useMemo)((function(){return[{title:"Continue",action:Ge.resume(),active:!0},{title:"Restart",action:Ge.start(O)},{title:"Quit Game",action:Ge.quit()}]}),[O]);return Object(z.jsxs)(Qe,{className:"max-w-[12rem]",title:"Paused",selectOpen:f,closeAction:u,children:[Object(z.jsx)(Et,{className:"mb-5",items:v}),Object(z.jsx)(ut,{tools:m})]})},Lt=function(e){Object(r.useEffect)((function(){i.a.pageview(e)}),[e])},Pt=(vt={},Object(xe.a)(vt,c.WELCOME,"Welcome"),Object(xe.a)(vt,c.STARTING,"Starting"),Object(xe.a)(vt,c.RUNNING,"Playing"),Object(xe.a)(vt,c.PAUSED,"Paused"),Object(xe.a)(vt,c.FINISHING,"Game Over"),Object(xe.a)(vt,c.FINISHED,"Game Over"),vt),Dt=function(e){var t=e.label,n=e.reverse,c=void 0!==n&&n,r=e.className,a=e.children,o=ot().transparent;return Object(z.jsxs)("div",{className:Ye()(r,"flex items-center w-full",{"flex-col":!c,"flex-col-reverse":c}),children:[Object(z.jsx)("div",{className:"flex text-light mb-1",children:t}),Object(z.jsx)("div",{className:Ye()("flex w-full flex-col rounded-lg",{"border border-gray-200 dark:border-gray-600":o,"dark:nm-inset-gray-800 nm-inset-gray-100":!o}),children:a})]})},Ft=(n(84),pt={},Object(xe.a)(pt,U.I,"color-i"),Object(xe.a)(pt,U.O,"color-o"),Object(xe.a)(pt,U.T,"color-t"),Object(xe.a)(pt,U.S,"color-s"),Object(xe.a)(pt,U.Z,"color-z"),Object(xe.a)(pt,U.J,"color-j"),Object(xe.a)(pt,U.L,"color-l"),pt),Ht=function(e){var t=e.ghost,n=e.glow,c=e.grid,a=e.speed,o=e.type,s=Object(r.useMemo)((function(){var e={};return o&&n&&a&&(e.animationDuration="".concat(a,"ms")),t&&(e.opacity="".concat(t)),e}),[o,n,a,t]);return Object(z.jsx)("div",{className:Ye()("game-block swipeController bg-block",{"game-block-border":c}),"data-testid":"game-block",children:Object(z.jsx)("div",{className:Ye()("block-color relative w-full h-full border-opacity-100 bg-block",!n&&o&&Ft[o],{"color-glow":o&&n,ghost:o&&t}),style:s})})},At=function(e){var t=e.center,n=void 0===t?[2,1]:t,c=e.grid,a=void 0===c||c,o=e.count,s=void 0===o?4:o,i=e.type,u=void 0===i?U.Z:i,l=e.values,d=e.className,f=Object(r.useMemo)((function(){var e=Object(v.a)(n,2),t=e[0],c=e[1],r=Array(s*s).fill(void 0);return null===l||void 0===l||l.forEach((function(e){var n=Object(v.a)(e,2),a=n[0],o=n[1];return r[o*s+a+t+c*s]=u})),r}),[s,n,u,l]);return Object(z.jsx)("div",{className:Ye()(d,"grid w-full min-w-full",{"game-grid":a}),style:{gridTemplateColumns:"repeat(".concat(s,", minmax(0, 1fr))")},children:f.map((function(e,t){return Object(z.jsx)(Ht,{type:e,grid:a},t)}))})},Gt=function(e){var t=e.label,n=e.reverse,c=void 0!==n&&n,r=e.selectPieces,a=e.className,o=Object(l.c)(r);return Object(z.jsx)(Dt,{label:t,reverse:c,children:Object(z.jsx)("div",{className:Ye()(a,"flex flex-col relative w-full bg-black"),children:o.map((function(e,t){return Object(z.jsx)(At,{values:e?he[e][0]:void 0,type:e,grid:!1},t)}))})})},Ut=n(63),Bt=function(e){var t=e.keyCode,n=e.onPress,c=e.onRelease;return Object(r.useEffect)((function(){var e=function(e){e.repeat||e.code!==t||("keydown"===e.type&&n&&n(),"keyup"===e.type&&c&&c())};return document.addEventListener("keydown",e),document.addEventListener("keyup",e),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",e)}}),[t,n,c]),null},zt=function(e){var t=e.disabled,n=e.keyCode,c=e.onHold,a=e.className,o=Object(r.useState)(!1),s=Object(v.a)(o,2),i=s[0],u=s[1],l=ot().large;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(it,{"data-testid":"game-hold",className:Ye()(a,"flex text-sm",{"p-2":!l,"p-3":l}),preventFocus:!0,disabled:t,active:i&&!t,shape:We.ROUND,onClick:function(){return c()},children:Object(z.jsx)(Ut.a,{})}),Object(z.jsx)(Bt,{keyCode:n,onPress:function(){!t&&c(),u(!0)},onRelease:function(){u(!1)}})]})},Vt=n(51),Wt=function(e){var t=e.disabled,n=e.keyCodeLeft,c=e.keyCodeRight,a=e.onRotateLeft,o=e.onRotateRight,s=e.className,i=Object(r.useState)(!1),u=Object(v.a)(i,2),l=u[0],d=u[1],f=Object(r.useState)(!1),j=Object(v.a)(f,2),b=j[0],O=j[1],m=ot().large,p=Object(r.useMemo)((function(){return Ye()(s,"flex text-lg items-center justify-center",{"w-14 h-14":!m,"w-16 h-16":m})}),[s,m]);return Object(z.jsxs)("div",{className:"flex gap-4 my-auto",children:[Object(z.jsx)(it,{"data-testid":"game-rotate-left",className:p,preventFocus:!0,disabled:t,active:l,shape:We.LEFT,onPress:a,children:Object(z.jsx)(Vt.a,{})}),Object(z.jsx)(it,{"data-testid":"game-rotate-right",className:p,preventFocus:!0,disabled:t,active:b,shape:We.RIGHT,onPress:o,children:Object(z.jsx)(Vt.b,{})}),!t&&Object(z.jsx)(Bt,{keyCode:n,onPress:function(){a(),d(!0)},onRelease:function(){d(!1)}}),!t&&Object(z.jsx)(Bt,{keyCode:c,onPress:function(){o(),O(!0)},onRelease:function(){O(!1)}})]})},Zt=function(e){var t=e.className,n=Object(l.c)(h.paused),c=Ze(),r=ot().large;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(it,{"data-testid":"game-settings",className:Ye()(t,"flex text-sm",{"p-2":!r,"p-3":r}),disabled:n,preventFocus:!0,primary:!0,shape:We.ROUND,onClick:function(){return c(Ge.pause())},children:Object(z.jsx)(B.b,{})}),!n&&Object(z.jsx)(Bt,{keyCode:"Escape",onPress:function(){return c(Ge.pause())}})]})},qt=function(e){var t=e.disabled,n=e.icon,c=e.keyCode,a=e.onDrop,o=e.shape,s=e.className,i=Object(r.useState)(!1),u=Object(v.a)(i,2),l=u[0],d=u[1],f=ot().large;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(it,{className:Ye()(s,"items-center justify-center",{"p-4":!f,"p-5":f}),disabled:t,preventFocus:!0,shape:o,active:l,"data-testid":"game-soft-drop",onPress:function(){return a(!0)},onRelease:function(){return a(!1)},children:n}),!t&&Object(z.jsx)(Bt,{keyCode:c,onPress:function(){a(!0),d(!0)},onRelease:function(){a(!1),d(!1)}})]})},Jt=function(e){var t=e.emitFirst,n=e.disabled,c=e.onRepeat,a=e.speed;return Object(r.useEffect)((function(){if(!n&&(t&&c(),a>0)){var e=setInterval((function(){return c()}),a);return function(){return clearInterval(e)}}}),[t,n,c,a]),null},Kt=function(e){var t=e.disabled,n=e.icon,c=e.keyCode,a=e.onMove,o=e.speed,s=void 0===o?500:o,i=e.shape,u=e.className,l=Object(r.useState)(0),d=Object(v.a)(l,2),f=d[0],j=d[1],b=Object(r.useState)(!1),O=Object(v.a)(b,2),m=O[0],p=O[1],x=ot().large;Object(r.useEffect)((function(){m&&1!==f&&a()}),[m,f,a]);var h=Object(r.useCallback)((function(){p(!0),j(0)}),[]),g=Object(r.useCallback)((function(){return p(!1)}),[]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(it,{"data-testid":"game-move",className:Ye()("items-center justify-center",u,{"p-4":!x,"p-5":x}),preventFocus:!0,disabled:t,active:m,shape:i,onPress:function(){return h()},onRelease:function(){return g()},children:n}),!t&&Object(z.jsx)(Bt,{keyCode:c,onPress:h,onRelease:g}),!t&&Object(z.jsx)(Jt,{onRepeat:function(){return j(f+1)},disabled:!m,speed:s})]})},Yt=function(e){var t=e.disabled,n=e.hardDrop,c=e.left,r=e.right,a=e.softDrop,o=e.onHardDrop,s=e.onLeft,i=e.onRight,u=e.onSoftDrop,l=e.speed,d=void 0===l?500:l,f=e.className;return Object(z.jsxs)("div",{className:Ye()(f,"grid grid-cols-3 gap-1"),children:[Object(z.jsx)(qt,{className:"col-start-2 bg-yellow-600",disabled:t,icon:Object(z.jsx)(B.g,{}),keyCode:n,onDrop:function(e){e&&o()},shape:We.UP}),Object(z.jsx)(Kt,{className:"col-start-1",disabled:t,icon:Object(z.jsx)(B.e,{}),keyCode:c,onMove:s,speed:d,shape:We.LEFT}),Object(z.jsx)(Kt,{className:"col-start-3",disabled:t,icon:Object(z.jsx)(B.f,{}),keyCode:r,onMove:i,speed:d,shape:We.RIGHT}),Object(z.jsx)(qt,{className:"col-start-2",disabled:t,icon:Object(z.jsx)(B.d,{}),keyCode:a,onDrop:u,shape:We.DOWN})]})},Xt=function(e){var t=e.selectKeys,n=void 0===t?S.keys:t,c=e.selectRepeatSpeed,r=void 0===c?h.repeatSpeed:c,a=e.selectEnabled,o=void 0===a?h.running:a,s=e.selectHoldEnabled,i=void 0===s?h.holdEnabled:s,u=e.transparent,d=e.className,f=Object(l.c)(n),j=f.left,b=f.right,O=f.rotate_left,m=f.rotate_right,v=f.soft_drop,p=f.hard_drop,x=f.hold,g=Object(l.c)(r),y=Object(l.c)(i),N=Object(l.c)(o),k=Ze(),w=ot().large,_=(Object(l.c)(S.Swipe),Object(l.c)(S.hand));return Object(z.jsx)("div",{className:Ye()(d,"flex relative flex-row-reverse "),children:Object(z.jsx)("div",{className:Ye()(d,"flex relative ","right"===_&&"flex-row-reverse"),children:Object(z.jsxs)(st,{transparent:Boolean(u),large:w,children:[Object(z.jsxs)("div",{className:"flex relative ml-auto ml-5 mr-5",children:[Object(z.jsx)(zt,{className:"absolute top-0 left-0",keyCode:x,disabled:!N||!y,onHold:function(){k(Ge.hold()),k(Ge.tick())}}),Object(z.jsx)(Wt,{disabled:!N,keyCodeLeft:O,keyCodeRight:m,onRotateLeft:function(){return k(Ge.rotate(pe.LEFT))},onRotateRight:function(){return k(Ge.rotate(pe.RIGHT))}})]}),Object(z.jsx)(Yt,{disabled:!N,left:j,right:b,softDrop:v,hardDrop:p,onLeft:function(){return k(Ge.move(pe.LEFT))},onRight:function(){return k(Ge.move(pe.RIGHT))},onSoftDrop:function(e){return k(Ge.softDrop(e))},onHardDrop:function(){return k(Ge.hardDrop())},speed:g}),Object(z.jsx)(Zt,{className:"absolute top-0 right-0"})]})})})},Qt=function(e){var t=e.speed,n=e.onTick;return function(e,t,n){var c=Object(r.useMemo)((function(){return[e,t].concat(Object(I.a)(n))}),[e,t,n]);Object(r.useEffect)((function(){var n=setInterval((function(){return e()}),t);return function(){return clearInterval(n)}}),c)}((function(){return n()}),t,[t,n]),null},$t=function(e){var t=e.count,n=e.onStart,c=e.className,a=Object(r.useState)((function(){return t})),o=Object(v.a)(a,2),s=o[0],i=o[1];return Object(r.useEffect)((function(){if(s>0){var e=setInterval((function(){return i(s-1)}),1e3);return function(){return clearInterval(e)}}0===s&&n()}),[s,n]),Object(z.jsx)("div",{"data-testid":"game-timer",className:Ye()(c,"flex font-mono items-center justify-center text-9xl"),children:s>0?s:""})};$t.defaultProps={count:3};var en=function(e){var t=e.indx,n=Object(l.c)(h.screenCell(t)),c=Object(l.c)(h.speed);return n?Object(z.jsx)(Ht,{type:n.type,glow:n.glow,ghost:n.ghost,speed:c,grid:!0}):null},tn=(n(85),function(e){var t=e.className,n=Object(l.c)(h.size),c=Object(v.a)(n,2),a=c[0],o=c[1],s=Object(r.useMemo)((function(){return Array(a*o).fill(null)}),[a,o]);return Object(z.jsx)("div",{className:Ye()(t,"game-grid ml-auto mr-auto w-full min-w-full min-h-full border-gray-700 bg-grid m"),style:{gridTemplateColumns:"repeat(".concat(a,", minmax(0, 1fr))")},children:s.map((function(e,t){return Object(z.jsx)(en,{indx:t},t)}))})}),nn=function(e){var t=e.autoPlay,n=void 0===t||t,c=e.loop,a=e.onDone,o=e.onLoaded,s=e.src,i=e.volume,u=Object(r.useRef)(null);return Object(r.useEffect)((function(){i&&(u.current.volume=i)}),[u,i]),Object(z.jsx)("audio",{src:s,ref:u,autoPlay:n,controls:!1,loop:Boolean(c),onEnded:function(){return a&&a()},onCanPlayThrough:function(){return o&&o()}})},cn=function(){var e=Object(l.c)(S.music),t=Object(l.c)(S.musicVolume),n=Object(l.c)(S.musicType);return Object(z.jsx)(z.Fragment,{children:e&&Object(z.jsx)(nn,{src:V[n],volume:t/100,loop:!0})})},rn=function(e){var t=e.sources,n=e.onLoaded,c=Object(r.useMemo)((function(){var e=t.map((function(e){return[e,!1]}));return new Map(e)}),[t]),a=Object(r.useCallback)((function(e){c.set(e,!0),Array.from(c.values()).every((function(e){return e}))&&n()}),[c,n]);return Object(z.jsx)(z.Fragment,{children:Array.from(c.keys()).map((function(e){return Object(z.jsx)(nn,{src:e,autoPlay:!1,onLoaded:function(){return a(e)}},e)}))})},an=function(e){var t=e.onLoaded,n=e.className,c=Object(l.c)(S.musicType),a=Object(r.useMemo)((function(){return[].concat(Object(I.a)(Y),[V[c]])}),[c]);return Object(z.jsxs)("div",{"data-testid":"game-loader",className:Ye()(n,"flex font-mono items-center justify-center text-2xl"),children:["Loading",Object(z.jsx)(rn,{sources:a,onLoaded:t})]})},on=function(){var e=Object(l.c)(S.sound),t=Object(l.c)(S.soundVolume),n=Object(l.c)(h.soundTracks),c=Ze();return Object(z.jsx)(z.Fragment,{children:e&&n.map((function(e){var n=e.id,r=e.src;return Object(z.jsx)(nn,{src:r,volume:t/100,onDone:function(){return c(Ge.soundTrack(n))}},n)}))})},sn=function(e){var t=e.message,n=e.className;return Object(z.jsx)("div",{"data-testid":"game-toast",className:Ye()(n,"flex font-mono items-center justify-center text-4xl"),children:t})},un=function(e){var t=e.className,n=Object(r.useState)(!1),c=Object(v.a)(n,2),a=c[0],o=c[1],s=Object(r.useState)(!1),i=Object(v.a)(s,2),u=i[0],d=i[1],f=Ze(),j=function(){var e=function(){return"visible"===document.visibilityState},t=Object(r.useState)(e()),n=Object(v.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){var t=function(){return a(e())};return document.addEventListener("visibilitychange",t),function(){return document.removeEventListener("visibilitychange",t)}}),[]),c}(),b=Object(l.c)(h.starting),O=Object(l.c)(h.running),m=Object(l.c)(h.finishing),p=Object(l.c)(h.restartTicker),x=Object(l.c)(h.toastMessage),g=Object(l.c)(h.speed),y=Object(l.c)(S.Swipe);Array.from(document.querySelectorAll(".grid-cols-mobile"));Object(r.useEffect)((function(){if("on"===y){document.getElementsByClassName("swipe");var e,t,n=function(n){n.preventDefault(),e=n.touches[0].pageX,t=n.touches[0].pageY,console.log("Touches",n.touches.length),console.log("Target",n.targetTouches.length),console.log("Changed",n.changedTouches.length)};document.addEventListener("touchstart",n),document.addEventListener("touchmove",(function(e){Object(I.a)(e.changedTouches).forEach((function(e){}))}));var c=function(n){Object(I.a)(n.changedTouches).forEach((function(n){var c,r=n.pageX,a=n.pageY,o=r-e,s=a-t;c=Math.abs(o)>Math.abs(s)?o>0?"right":"left":s>0?"down":"up",console.log("Swipe direction: ".concat(c)),"left"===c&&f(Ge.move(pe.LEFT)),"right"===c&&f(Ge.move(pe.RIGHT)),"up"===c&&f(Ge.rotate(pe.RIGHT)),"down"===c&&f(Ge.hardDrop())}))};return document.addEventListener("touchend",c),function(){document.removeEventListener("touchend",c),document.removeEventListener("touchstart",n)}}}),[f,y]),Object(r.useEffect)((function(){if(x){d(!0);var e=setTimeout((function(){d(!1)}),1e3);return function(){d(!1),clearTimeout(e)}}}),[x]),Object(r.useEffect)((function(){j||f(Ge.pause())}),[j,f]);var N=ot().transparent;return Object(z.jsx)("div",{className:Ye()(t,document,"on"===y&&!document),children:Object(z.jsxs)("div",{className:Ye()(t,"flex relative overflow-hidden rounded-lg desktop:p-4 w-full bg-bl",{"border border-gray-200 dark:border-gray-600":N,"dark:nm-inset-gray-800 nm-inset-gray-100":!N}),children:[Object(z.jsx)(tn,{}),O&&Object(z.jsx)(cn,{}),Object(z.jsx)(on,{}),b&&!a&&Object(z.jsx)(an,{className:"absolute w-full h-full -m-4",onLoaded:function(){return o(!0)}}),b&&a&&Object(z.jsx)($t,{className:"absolute w-full h-full -m-4",onStart:function(){return f(Ge.run())}}),u&&Object(z.jsx)(sn,{className:"absolute w-full h-full -m-4",message:x}),O&&[p].map((function(e){return Object(z.jsx)(Qt,{speed:g,onTick:function(){return f(Ge.tick())}},e)})),m&&Object(z.jsx)(Qt,{speed:50,onTick:function(){return f(Ge.finishing())}})]})})},ln=function(e){var t=e.label,n=e.primary,c=e.reverse,r=void 0!==c&&c,a=e.value;return Object(z.jsx)(Dt,{label:t,reverse:r,children:Object(z.jsx)(lt,{className:"text-[1.25rem] h-[1.9rem] sm:text-2xl sm:h-[2.5rem]",digits:7,primary:n,value:a})})},dn=function(e){var t=e.reverse,n=void 0!==t&&t,c=e.className,r=Object(l.c)(h.score),a=Object(l.c)(h.level),o=Object(l.c)(h.lines);return Object(z.jsxs)("div",{className:Ye()(c,"flex"),children:[Object(z.jsx)(ln,{label:"Score",value:r,reverse:n}),Object(z.jsx)(ln,{label:"Level",value:a,reverse:n,primary:!1}),Object(z.jsx)(ln,{label:"Lines",value:o,reverse:n,primary:!1})]})},fn=function(e){var t=e.floatControls;return Lt("/game/desktop"),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"grid grid-cols-desktop opacity-90 gap-4 m-auto",children:[Object(z.jsxs)("div",{className:"flex flex-col",children:[Object(z.jsx)(Gt,{reverse:!0,className:"p-4",label:"Hold",selectPieces:h.hold}),Object(z.jsx)(dn,{className:"flex-col mt-auto gap-4"})]}),Object(z.jsx)(un,{}),Object(z.jsx)("div",{className:"flex flex-col",children:Object(z.jsx)(Gt,{className:"p-4",label:"Next",reverse:!0,selectPieces:h.next})}),!t&&Object(z.jsx)(Xt,{className:"col-start-2 mt-5"})]}),t&&Object(z.jsx)("div",{className:"flex absolute bottom-0 mb-5 w-full",children:Object(z.jsx)("div",{className:"grid grid-cols-desktop gap-4 mx-auto",children:Object(z.jsx)(Xt,{className:"col-start-2",transparent:!0})})})]})},jn=function(){return Lt("/game/mobile"),Object(z.jsxs)("div",{className:"flex flex-col p-4",children:[Object(z.jsx)(dn,{className:"mx-auto gap-2",reverse:!0}),Object(z.jsxs)("div",{className:"grid grid-cols-mobile gap-2 mx-auto border-gray-700",children:[Object(z.jsx)("div",{className:"flex flex-col",children:Object(z.jsx)(Gt,{className:"p-1",label:"Hold",reverse:!0,selectPieces:h.hold})}),Object(z.jsx)(un,{}),Object(z.jsx)("div",{className:"flex flex-col",children:Object(z.jsx)(Gt,{className:"p-1",label:"Next",reverse:!0,selectPieces:h.next})})]}),Object(z.jsx)("div",{className:"flex absolute bottom-14 left-4 right-4",children:Object(z.jsx)(Xt,{className:"w-full",transparent:!0})})]})},bn=function(e){var t=e.selectStart,n=void 0===t?S.startLevel:t,c=Object(l.c)(n),a=Object(r.useMemo)((function(){return[{title:"New Game",action:Ge.start(c),active:!0},{title:"High Scores",action:E.open(N.HIGH_SCORES)},{title:"Settings",action:E.open(N.OPTIONS)}]}),[c]);return Object(z.jsxs)("div",{className:"flex flex-col h-full main-bg",children:[Object(z.jsx)("div",{className:"mt-auto mb-14 picture"}),Object(z.jsx)(Et,{className:"w-44 ml-auto mr-auto",items:a}),Object(z.jsx)("div",{className:"ml-auto mr-auto mt-5 mb-auto"})]})},On=function(){var e=Object(l.c)(h.welcoming),t=Object(u.a)("(min-width:600px)"),n=Object(u.a)("(max-height:850px)"),c=Object(u.a)("(max-width:380px)");Lt("/"),function(e){var t=Object(l.c)(S.persist),n=Ze();Object(r.useEffect)((function(){var t=localStorage.getItem(e);if(t)try{var c=JSON.parse(t);(null===c||void 0===c?void 0:c.version)===C&&n(E.persist(c))}catch(r){console.error("Could not read persist data.",r)}}),[e,n]),Object(r.useEffect)((function(){localStorage.setItem(e,JSON.stringify(t))}),[e,t])}(b),function(){var e=Object(l.c)(h.status),t=Object(r.useMemo)((function(){return"".concat(Pt[e]," | ").concat(f)}),[e]);Object(r.useEffect)((function(){document.title=t}),[t])}();var a=Object(r.useMemo)((function(){return Object(z.jsx)(st,{transparent:!t,large:!t&&!c,children:t?Object(z.jsx)(fn,{floatControls:n}):Object(z.jsx)(jn,{})})}),[t,n,c]),o=Object(l.c)(h.level),s={1:"bg-summer",2:"bg-winter",3:"bg-autumn"};return Object(r.useEffect)((function(){console.log(o)}),[o]),Object(z.jsxs)("div",{className:"flex flex-col w-full h-full ".concat(s[o]?s[o]:"bg-spring"),children:[e?Object(z.jsx)(bn,{}):a,Object(z.jsx)(Mt,{}),Object(z.jsx)(jt,{}),Object(z.jsx)(Ot,{}),Object(z.jsx)(Ct,{}),Object(z.jsx)(It,{}),Object(z.jsx)(tt,{})]})},mn=n(110),vn=function(e){var t=e.children;return function(){var e=Object(l.c)(S.dark);Object(r.useEffect)((function(){var t=document.documentElement;e?t.classList.add("dark"):t.classList.remove("dark")}),[e])}(),Object(z.jsx)(mn.b,{injectFirst:!0,children:t})},pn=function(e){var t=e.children,n=Object(r.useMemo)((function(){return qe()}),[]);return Object(z.jsx)(l.a,{store:n,children:Object(z.jsx)(vn,{children:t})})},xn=(n(86),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,113)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))});d&&i.a.initialize(d),s.a.render(Object(z.jsx)(a.a.StrictMode,{children:Object(z.jsx)(pn,{children:Object(z.jsx)(On,{})})}),document.getElementById("root")),xn()}},[[87,1,2]]]);
//# sourceMappingURL=main.9dc11c48.chunk.js.map